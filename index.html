<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
<script>window.location.href="misrtaca.edu.ly/renew.php"</script>
    <div class="container my-4 text-end">


        <div class="p-4 shadow-lg rounded bg-white mb-4 border-top border-primary border-5">
            <h2 class="text-center mb-4 text-primary fw-bold"> Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©- ÙƒÙ„ÙŠØ© Ø§Ù„Ø·ÙŠØ±Ø§Ù† Ø§Ù„Ù…Ø¯Ù†ÙŠ Ù…ØµØ±Ø§ØªØ©</h2>
            <div class="row g-3 justify-content-center">
                <div class="col-md-6">
                    <input type="text" id="studentIdInput" class="form-control form-control-lg border-primary shadow-sm"
                        placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ Ù„Ø±Ø¤ÙŠØ© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ...">
                </div>
                <div class="col-md-3">
                    <button onclick="searchStudent()" class="btn btn-primary btn-lg w-100 shadow-sm">ğŸ” Ø¹Ø±Ø¶
                        Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                </div>
            </div>
        </div>

        <div id="resultArea" class="hidden">
            <div id="studentNameHeader" class="alert alert-info shadow-sm text-center fw-bold mb-4 border-0"></div>

            <ul class="nav nav-pills nav-fill mb-3 shadow-sm p-2 bg-white rounded" id="pills-tab" role="tablist">
                <li class="nav-item"><button class="nav-link active fw-bold" data-bs-toggle="pill"
                        data-bs-target="#pills-seating" type="button">ğŸª‘ Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¬Ù„ÙˆØ³</button></li>
                <li class="nav-item"><button class="nav-link fw-bold" data-bs-toggle="pill"
                        data-bs-target="#pills-grades" type="button">ğŸ“Š ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</button></li>
            </ul>

            <div class="tab-content card shadow-lg border-0 mb-5">
                <div class="tab-pane fade show active" id="pills-seating" role="tabpanel">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0 text-center align-middle">
                            <thead class="table-dark">
                                <tr>
                                    <th>Ø§Ù„Ù…Ù‚Ø±Ø±</th>
                                    <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</th>
                                    <th>Ø§Ù„Ù‚Ø§Ø¹Ø©</th>
                                    <th>Ø§Ù„ÙƒØ±Ø³ÙŠ</th>
                                </tr>
                            </thead>
                            <tbody id="seatingBody"></tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane fade" id="pills-grades" role="tabpanel">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0 text-center align-middle">
                            <thead class="table-primary">
                                <tr>
                                    <th>Ø§Ù„Ù…Ù‚Ø±Ø±</th>
                                    <th>Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠ</th>
                                    <th>Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ù†Ø¸Ø±ÙŠ</th>
                                    <th>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</th>
                                    <th>Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠ</th>
                                    
                                </tr>
                            </thead>
                            <tbody id="gradesBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="errorArea"
            class="alert alert-warning text-center shadow-sm rounded-4 animate__animated animate__shakeX hidden">
            âš ï¸ Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª.
        </div>
    </div>

    <script>
        let csvData = [];

        // 1. ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ù€ CSV ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        window.onload = function () {
            Papa.parse("data.csv", {
                download: true,
                header: true,
                complete: function (results) {
                    csvData = results.data;
                    console.log("Data Loaded");
                }
            });
        };

        function searchStudent() {
            const id = document.getElementById('studentIdInput').value.trim();
            const results = csvData.filter(row => row.studentId === id);

            if (results.length > 0) {
                document.getElementById('errorArea').classList.add('hidden');
                document.getElementById('resultArea').classList.remove('hidden');
                document.getElementById('studentNameHeader').innerText = "ğŸ‘¤ Ø§Ù„Ø·Ø§Ù„Ø¨: " + results[0].studentName;

                // Ù…Ù„Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¬Ù„ÙˆØ³
                let seatingHtml = '';
                let gradesHtml = '';

                results.forEach(row => {
                    seatingHtml += `<tr>
                    <td class="fw-bold">${row.course}</td>
                    <td class="text-danger fw-bold">${row.examDate || 'â€”'}</td>
                    <td><span class="badge bg-warning text-dark">${row.hall || 'â€”'}</span></td>
                    <td class="fw-bold text-primary">${row.seat || 'â€”'}</td>
                </tr>`;

                    gradesHtml += `<tr>
                    <td class="fw-bold">${row.course}</td>
                    <td>${row.lab || 'â€”'}</td>
                    <td>${row.theo || 'â€”'}</td>
                    <td class="table-success fw-bold">${row.total_work || 'â€”'}</td>
                      <td class="table-success fw-bold">${row.final || 'â€”'}</td>
                </tr>`;
                });

                document.getElementById('seatingBody').innerHTML = seatingHtml;
                document.getElementById('gradesBody').innerHTML = gradesHtml;
            } else {
                document.getElementById('resultArea').classList.add('hidden');
                document.getElementById('errorArea').classList.remove('hidden');
            }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
